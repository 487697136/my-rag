# 路由性能测试报告\n\n生成时间: 2025-08-10 17:52:05\n\n## 测试目标\n\n- **★★ 路由准确率目标**: > 90% (系统实用性)\n- **覆盖率要求**: 平衡准确率和覆盖率\n- **置信度阈值优化**: 找到最佳阈值设置\n\n## 阈值性能分析\n\n|   threshold |   route_accuracy |   optimal_coverage |   high_confidence_accuracy |   fallback_usage_rate |   avg_confidence | mode_distribution                                                                                                                                                                                                                                                                                     |   n_samples |
|------------:|-----------------:|-------------------:|---------------------------:|----------------------:|-----------------:|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------:|
|         0.6 |           0.8603 |             0.9379 |                     0.8824 |                0.0621 |           0.8682 | {'llm_only': {'count': 411, 'percentage': 23.620689655172413, 'avg_confidence': 0.8240566039976999}, 'naive': {'count': 716, 'percentage': 41.14942528735632, 'avg_confidence': 0.8011171915342413}, 'local': {'count': 613, 'percentage': 35.229885057471265, 'avg_confidence': 0.9761712526973663}} |        1740 |
|         0.7 |           0.8603 |             0.7902 |                     0.9287 |                0.2098 |           0.8682 | {'llm_only': {'count': 411, 'percentage': 23.620689655172413, 'avg_confidence': 0.8240566039976999}, 'naive': {'count': 716, 'percentage': 41.14942528735632, 'avg_confidence': 0.8011171915342413}, 'local': {'count': 613, 'percentage': 35.229885057471265, 'avg_confidence': 0.9761712526973663}} |        1740 |
|         0.8 |           0.8603 |             0.746  |                     0.943  |                0.254  |           0.8682 | {'llm_only': {'count': 411, 'percentage': 23.620689655172413, 'avg_confidence': 0.8240566039976999}, 'naive': {'count': 716, 'percentage': 41.14942528735632, 'avg_confidence': 0.8011171915342413}, 'local': {'count': 613, 'percentage': 35.229885057471265, 'avg_confidence': 0.9761712526973663}} |        1740 |
|         0.9 |           0.8603 |             0.5879 |                     0.9765 |                0.4121 |           0.8682 | {'llm_only': {'count': 411, 'percentage': 23.620689655172413, 'avg_confidence': 0.8240566039976999}, 'naive': {'count': 716, 'percentage': 41.14942528735632, 'avg_confidence': 0.8011171915342413}, 'local': {'count': 613, 'percentage': 35.229885057471265, 'avg_confidence': 0.9761712526973663}} |        1740 |\n\n## 关键发现\n\n### 目标达成情况\n✗ **路由准确率目标未达成**: 最高准确率 0.8603\n\n### 推荐配置\n- **最佳置信度阈值**: 0.6\n- **路由准确率**: 0.8603\n- **覆盖率**: 0.9379\n\n### 阈值影响分析\n| 阈值范围 | 特点 | 建议使用场景 |\n|----------|------|--------------|\n| 0.5-0.6 | 高覆盖率，中等准确率 | 需要处理所有查询的场景 |\n| 0.7-0.8 | 平衡准确率和覆盖率 | 大多数实际应用场景 |\n| 0.9+ | 高准确率，低覆盖率 | 高精度要求的关键应用 |\n\n### 路由模式分布\n在最佳阈值 0.6 下:\n- **llm_only**: 411 次 (23.6%), 平均置信度 0.824\n- **naive**: 716 次 (41.1%), 平均置信度 0.801\n- **local**: 613 次 (35.2%), 平均置信度 0.976\n\n## 技术分析\n\n### 置信度-准确率关系\n观察到的模式:\n- 高置信度阈值(≥0.8): 平均准确率 0.8603\n- 低置信度阈值(≤0.6): 平均准确率 0.8603\n- 准确率提升: 0.0 个百分点\n\n### 回退机制效果\n- 平均回退使用率: 23.45%\n- 回退机制有效性: 良好\n\n## 结论与建议\n\n⚠️ **路由准确率需要进一步优化**\n- 建议改进分类器训练策略\n- 考虑增强校准方法\n- 优化路由决策逻辑\n\n### 部署建议\n1. **生产环境配置**: 使用置信度阈值 0.6\n2. **监控指标**: 重点监控路由准确率和回退使用率\n3. **动态调整**: 根据实际查询分布调整阈值\n4. **故障保护**: 确保回退机制的可靠性\n