# 路由性能测试报告\n\n生成时间: 2025-08-10 18:45:35\n\n## 测试目标\n\n- **★★ 路由准确率目标**: > 90% (系统实用性)\n- **覆盖率要求**: 平衡准确率和覆盖率\n- **置信度阈值优化**: 找到最佳阈值设置\n\n## 阈值性能分析\n\n|   threshold |   route_accuracy |   optimal_coverage |   high_confidence_accuracy |   fallback_usage_rate |   avg_confidence | mode_distribution                                                                                                                                                                                                                                                                                       |   n_samples |
|------------:|-----------------:|-------------------:|---------------------------:|----------------------:|-----------------:|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------:|
|        0.5  |           0.8609 |             0.9931 |                     0.8628 |                0.0069 |           0.8682 | {'llm_only': {'count': 404, 'percentage': 23.218390804597703, 'avg_confidence': 0.8318372877303333}, 'naive': {'count': 722, 'percentage': 41.49425287356322, 'avg_confidence': 0.7917344987260869}, 'local': {'count': 614, 'percentage': 35.287356321839084, 'avg_confidence': 0.9745813972369471}}   |        1740 |
|        0.55 |           0.8603 |             0.992  |                     0.8627 |                0.008  |           0.8682 | {'llm_only': {'count': 403, 'percentage': 23.160919540229884, 'avg_confidence': 0.8326607053177535}, 'naive': {'count': 723, 'percentage': 41.55172413793103, 'avg_confidence': 0.7899478673308916}, 'local': {'count': 614, 'percentage': 35.287356321839084, 'avg_confidence': 0.9745813972369471}}   |        1740 |
|        0.6  |           0.8615 |             0.9379 |                     0.8824 |                0.0621 |           0.8682 | {'llm_only': {'count': 391, 'percentage': 22.47126436781609, 'avg_confidence': 0.8223311892897324}, 'naive': {'count': 739, 'percentage': 42.47126436781609, 'avg_confidence': 0.7222150520498649}, 'local': {'count': 610, 'percentage': 35.05747126436782, 'avg_confidence': 0.9752217796652348}}     |        1740 |
|        0.65 |           0.8471 |             0.7902 |                     0.9287 |                0.2098 |           0.8682 | {'llm_only': {'count': 338, 'percentage': 19.42528735632184, 'avg_confidence': 0.7893201347993328}, 'naive': {'count': 801, 'percentage': 46.03448275862069, 'avg_confidence': 0.5414782822907465}, 'local': {'count': 601, 'percentage': 34.54022988505747, 'avg_confidence': 0.9749337308104965}}     |        1740 |
|        0.7  |           0.8471 |             0.7902 |                     0.9287 |                0.2098 |           0.8682 | {'llm_only': {'count': 338, 'percentage': 19.42528735632184, 'avg_confidence': 0.7893201347993328}, 'naive': {'count': 801, 'percentage': 46.03448275862069, 'avg_confidence': 0.5414782822907465}, 'local': {'count': 601, 'percentage': 34.54022988505747, 'avg_confidence': 0.9749337308104965}}     |        1740 |
|        0.75 |           0.842  |             0.746  |                     0.943  |                0.254  |           0.8682 | {'llm_only': {'count': 319, 'percentage': 18.333333333333332, 'avg_confidence': 0.7766690240656068}, 'naive': {'count': 822, 'percentage': 47.241379310344826, 'avg_confidence': 0.48733936322859406}, 'local': {'count': 599, 'percentage': 34.42528735632184, 'avg_confidence': 0.9746584609661899}}  |        1740 |
|        0.8  |           0.842  |             0.746  |                     0.943  |                0.254  |           0.8682 | {'llm_only': {'count': 319, 'percentage': 18.333333333333332, 'avg_confidence': 0.7766690240656068}, 'naive': {'count': 822, 'percentage': 47.241379310344826, 'avg_confidence': 0.48733936322859406}, 'local': {'count': 599, 'percentage': 34.42528735632184, 'avg_confidence': 0.9746584609661899}}  |        1740 |
|        0.85 |           0.8299 |             0.6443 |                     0.967  |                0.3557 |           0.8682 | {'llm_only': {'count': 282, 'percentage': 16.206896551724135, 'avg_confidence': 0.726681399253092}, 'naive': {'count': 867, 'percentage': 49.82758620689655, 'avg_confidence': 0.35360565471893896}, 'local': {'count': 591, 'percentage': 33.96551724137931, 'avg_confidence': 0.9724744553933578}}    |        1740 |
|        0.9  |           0.8224 |             0.5879 |                     0.9765 |                0.4121 |           0.8682 | {'llm_only': {'count': 264, 'percentage': 15.172413793103448, 'avg_confidence': 0.6852105422757596}, 'naive': {'count': 894, 'percentage': 51.37931034482759, 'avg_confidence': 0.28232652367464156}, 'local': {'count': 582, 'percentage': 33.44827586206897, 'avg_confidence': 0.9723065346004715}}   |        1740 |
|        0.95 |           0.781  |             0.4017 |                     0.9957 |                0.5983 |           0.8682 | {'llm_only': {'count': 216, 'percentage': 12.413793103448276, 'avg_confidence': 0.48431069958847733}, 'naive': {'count': 978, 'percentage': 56.20689655172414, 'avg_confidence': 0.06307450785978394}, 'local': {'count': 546, 'percentage': 31.379310344827587, 'avg_confidence': 0.9733666291849632}} |        1740 |\n\n## 关键发现\n\n### 目标达成情况\n✗ **路由准确率目标未达成**: 最高准确率 0.8609\n\n### 推荐配置\n- **最佳置信度阈值**: 0.5\n- **路由准确率**: 0.8609\n- **覆盖率**: 0.9931\n\n### 阈值影响分析\n| 阈值范围 | 特点 | 建议使用场景 |\n|----------|------|--------------|\n| 0.5-0.6 | 高覆盖率，中等准确率 | 需要处理所有查询的场景 |\n| 0.7-0.8 | 平衡准确率和覆盖率 | 大多数实际应用场景 |\n| 0.9+ | 高准确率，低覆盖率 | 高精度要求的关键应用 |\n\n### 路由模式分布\n在最佳阈值 0.5 下:\n- **llm_only**: 404 次 (23.2%), 平均置信度 0.832\n- **naive**: 722 次 (41.5%), 平均置信度 0.792\n- **local**: 614 次 (35.3%), 平均置信度 0.975\n\n## 技术分析\n\n### 置信度-准确率关系\n观察到的模式:\n- 高置信度阈值(≥0.8): 平均准确率 0.8188\n- 低置信度阈值(≤0.6): 平均准确率 0.8609\n- 准确率提升: -4.2 个百分点\n\n### 回退机制效果\n- 平均回退使用率: 23.71%\n- 回退机制有效性: 良好\n\n## 结论与建议\n\n⚠️ **路由准确率需要进一步优化**\n- 建议改进分类器训练策略\n- 考虑增强校准方法\n- 优化路由决策逻辑\n\n### 部署建议\n1. **生产环境配置**: 使用置信度阈值 0.5\n2. **监控指标**: 重点监控路由准确率和回退使用率\n3. **动态调整**: 根据实际查询分布调整阈值\n4. **故障保护**: 确保回退机制的可靠性\n